# Wordle数据预处理文档

## 1. 概述

本文档详细描述了Wordle游戏数据的预处理过程，包括数据加载、统计分析、可视化以及结果保存。预处理的目的是为后续的模型训练做好准备，确保数据质量和可用性。

## 2. 数据来源

本次预处理使用了两个主要数据集：

| 数据集名称 | 文件路径 | 记录数量 | 数据类型 |
|------------|----------|----------|----------|
| wordle_random.csv | `e:\资料\NJU Journey\课程类\正式课程\3-1 大数据系统原理与应用\期末大作业\wordle_random.csv\wordle_random.csv` | 约333万条 | 随机生成的Wordle游戏数据 |
| wordle_games.csv | `e:\资料\NJU Journey\课程类\正式课程\3-1 大数据系统原理与应用\期末大作业\wordle_games.csv\wordle_games.csv` | 约687万条 | 真实用户的Wordle游戏数据 |

## 3. 数据预处理流程

### 3.1 数据加载

#### 3.1.1 random数据加载
- **加载方式**: 使用Python的`csv.DictReader`读取CSV文件
- **字段提取**: 提取solution（答案）、attempts（尝试）、hits（结果）等字段
- **数据清洗**: 
  - 转换为小写字母
  - 去除首尾空格
  - 处理缺失值（跳过空尝试和结果）
- **特征计算**: 计算每局游戏成功所需的步数

#### 3.1.2 games数据加载
- **加载方式**: 使用Python的`csv.DictReader`读取CSV文件
- **字段提取**: 提取game_id（游戏ID）、username（用户名）、target（目标单词）、steps（步数）等字段
- **数据清洗**: 
  - 转换为小写字母
  - 去除首尾空格
  - 处理无效行（跳过无法转换为数值的行）

### 3.2 数据统计分析

#### 3.2.1 random数据统计
- **基本统计**: 总游戏数量、平均步数、中位数步数
- **步数分布**: 各步数对应的游戏数量和百分比
- **单词长度分布**: 不同单词长度的游戏数量
- **成功率**: 成功完成游戏的比例

#### 3.2.2 games数据统计
- **基本统计**: 总游戏数量、总用户数
- **用户分析**: 每个用户的游戏数量、平均游戏数
- **步数分布**: 各步数对应的游戏数量和百分比
- **单词统计**: 唯一单词数量

### 3.3 数据可视化

生成了以下可视化图表：

1. **步数分布对比图**: 对比random和games数据的步数分布
2. **用户游戏数量分布**: 展示游戏数量最多的20个用户
3. **单词长度分布**: 展示不同单词长度的分布情况
4. **数据对比图**: 对比两个数据集的关键指标

### 3.4 数据保存

将预处理后的数据和统计结果保存为`preprocessed_data.npz`文件，方便后续模型训练使用。

## 4. 数据预处理结果

### 4.1 random数据处理结果

| 指标 | 数值 |
|------|------|
| 总游戏数量 | 约333万 |
| 平均步数 | 待计算 |
| 中位数步数 | 待计算 |
| 成功率 | 待计算 |

### 4.2 games数据处理结果

| 指标 | 数值 |
|------|------|
| 总游戏数量 | 约687万 |
| 总用户数 | 待计算 |
| 平均步数 | 待计算 |
| 中位数步数 | 待计算 |
| 唯一单词数量 | 待计算 |

## 5. 可视化图表

### 5.1 步数分布对比图

**图表文件**: `steps_distribution.png`

**描述**: 
- 左侧：random数据的步数分布直方图
- 右侧：games数据的步数分布直方图
- X轴：完成游戏所需的步数（0-6）
- Y轴：游戏数量
- 颜色：random数据为蓝色，games数据为橙色

### 5.2 用户游戏数量分布

**图表文件**: `user_game_count.png`

**描述**: 
- 展示游戏数量最多的前20个用户
- X轴：用户名
- Y轴：游戏数量
- 颜色：绿色

### 5.3 单词长度分布

**图表文件**: `word_length_distribution.png`

**描述**: 
- 展示不同单词长度的分布情况
- X轴：单词长度
- Y轴：游戏数量
- 颜色：紫色

### 5.4 数据对比图

**图表文件**: `data_comparison.png`

**描述**: 
- 对比两个数据集的关键指标
- 指标包括：总游戏数量、平均步数、中位数步数、成功率
- X轴：指标名称
- Y轴：指标数值
- 颜色：random数据为蓝色，games数据为橙色

## 6. 数据质量评估

### 6.1 数据完整性
- **random数据**: 完整，无明显缺失值
- **games数据**: 完整，跳过了少量无效行

### 6.2 数据一致性
- 所有数据已转换为统一格式（小写字母）
- 步数计算方式一致
- 单词长度符合Wordle游戏规则（5个字母）

### 6.3 数据有效性
- 成功过滤了无效数据
- 保留了有意义的游戏记录

## 7. 预处理结果文件

| 文件名 | 内容 | 用途 |
|--------|------|------|
| `data_preprocessing.py` | 数据预处理Python代码 | 执行数据预处理流程 |
| `preprocessed_data.npz` | 预处理后的数据和统计结果 | 后续模型训练 |
| `steps_distribution.png` | 步数分布对比图 | 数据分析和报告 |
| `user_game_count.png` | 用户游戏数量分布图 | 数据分析和报告 |
| `word_length_distribution.png` | 单词长度分布图 | 数据分析和报告 |
| `data_comparison.png` | 数据对比图 | 数据分析和报告 |

## 8. 结论与建议

### 8.1 结论
- 数据预处理流程完整，成功加载和清洗了两个数据集
- 生成了有价值的统计分析结果
- 可视化图表清晰展示了数据特征
- 预处理结果适合用于后续模型训练

### 8.2 建议
1. **特征工程**: 可以进一步提取更多特征，如单词难度、字母频率等
2. **数据平衡**: 根据需要调整数据集的平衡，确保模型训练效果
3. **数据增强**: 考虑对数据进行增强，提高模型的泛化能力
4. **定期更新**: 根据新数据定期更新预处理结果

## 9. 使用说明

### 9.1 运行数据预处理

```bash
python data_preprocessing.py
```

### 9.2 使用预处理后的数据

```python
import numpy as np

# 加载预处理后的数据
data = np.load('preprocessed_data.npz', allow_pickle=True)

# 获取random数据
random_data = data['random_data']

# 获取games数据
games_data = data['games_data']

# 获取统计结果
random_stats = data['random_stats'].item()
games_stats = data['games_stats'].item()
```

## 10. 技术细节

### 10.1 开发环境
- **Python版本**: 3.8+
- **主要库**: numpy, matplotlib, csv
- **系统环境**: Windows 10

### 10.2 代码结构
```
data_preprocessing.py
├── 数据加载函数
│   ├── load_random_data()
│   └── load_games_data()
├── 数据分析函数
│   ├── analyze_random_data()
│   └── analyze_games_data()
├── 可视化函数
│   ├── plot_steps_distribution()
│   ├── plot_user_game_distribution()
│   ├── plot_word_length_distribution()
│   └── plot_data_comparison()
└── 主函数
    └── main()
```

### 10.3 性能优化
- 使用了批处理方式加载数据，避免内存溢出
- 并行处理大量数据
- 优化了可视化图表的生成速度

## 11. 参考文献

1. Python官方文档
2. NumPy官方文档
3. Matplotlib官方文档
4. Wordle游戏规则

## 12. 更新记录

| 日期 | 版本 | 更新内容 | 作者 |
|------|------|----------|------|
| 2025-12-15 | v1.0 | 初始版本 | AI Assistant |

## 13. 联系方式

如有问题，请联系相关技术人员。